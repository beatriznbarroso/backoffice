<?php
use Brg\Stock\Models\Product as ProductModel;
$product = ProductModel::find($formModel->id);
?>

<?php if(e($formModel->id)): ?>
  <div class="row">
    <div class="col-lg-3 text-left" style="margin-top: 10px;">
      <div class="form-group">
        <label>How many products would you like to order ? </label>
        <input type=number step="1" class="form-control" name="product_number" id="product_number" required style="width:240px;"/>
        <input type="hidden" class="form-control" value="<?=  $product->id ?>" name="product_id" id="product_id"/>
      </div>
      <div class="loading-indicator-container" >
        <button 
          type="button" 
          class="btn btn-primary btn-lg" 
          onclick="orderProducts()">        
          <i class="oc-icon-shopping-bag"></i> Order Products
        </button>
      </div>
    </div>
  </div>
<?php endif; ?>
  
<script>
  function orderProducts() {
    product_id = $('#product_id').val();
    product_number = $('#product_number').val();

    if(product_id && product_number){
      $.request('onOrderProducts', {
        data : {
          product_id: product_id,
          product_number: product_number
        },
        loading: $.oc.stripeLoadIndicator.show()
        }
      )
    }
    else {
      alert('Please insert how many products you would like to order')
    }
  }

</script>